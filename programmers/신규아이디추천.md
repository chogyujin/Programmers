```java

class Solution {
    public String solution(String new_id) {
        String answer = "";
        
        //1단계 대문자->소문자
        for(int i = 0; i < new_id.length(); i++){
            char newIdChar = new_id.charAt(i);
            if(newIdChar>='A' && newIdChar <='Z'){
                new_id = new_id.replace(newIdChar,(char)((int)newIdChar+32));
            }
        }
        
        //2단계 문자제거
        for(int i =0; i <new_id.length(); i++){
            char newIdChar = new_id.charAt(i);
            if(!(newIdChar>='a' && newIdChar<='z') &&
               !(newIdChar>='0' && newIdChar<='9') &&
               newIdChar!='-' &&
               newIdChar!='_' &&
               newIdChar!='.'){
                new_id = new_id.replace(newIdChar,' ');
            }
        }
        new_id = new_id.replace(" ","");
        
        //3단계 마침표 2개이상연속 1개로 치환
        StringBuilder sbd = new StringBuilder(new_id);
        for(int i=0; i<sbd.length(); i++){
            char newIdChar = sbd.charAt(i);
            if(newIdChar=='.'){
                for(int j=i+1;j<sbd.length();j++){
                    if(sbd.charAt(j)=='.'){
                        sbd.deleteCharAt(j);
                        j--;
                    }
                    else break;
                }
            }
        }
        
        //4단계 마침표 처음,끝 제거
        if(sbd.charAt(0)=='.') sbd.deleteCharAt(0);
        if(sbd.length()>0){//???? if문을 빼면 에러 발생 ???? StringIndexOutOfBoundsException
            if(sbd.charAt(sbd.length()-1)=='.') {
                sbd.deleteCharAt(sbd.length()-1);
            }
        }
        
        //5단계 빈문자열에 a 추가
        if(sbd.length()==0) sbd.append('a');
        
        //6단계
        System.out.println("@@"+sbd.length()+"&&"+sbd);
        if(sbd.length()>=16) {
            sbd.delete(15,sbd.length());
            System.out.println("&"+sbd);
            if(sbd.charAt(sbd.length()-1)=='.'){
                sbd.deleteCharAt(sbd.length()-1);
            }
        }
        
        //7단계
        if(sbd.length()<=2){
            while(true){
                sbd.append(sbd.charAt(sbd.length()-1));
                if(sbd.length()==3) break;
            }
        }
        
        answer = sbd.toString();
        System.out.println(sbd);
        
        return answer;
    }
}

```
